# 页表

![image-20200901140125852](https://tva1.sinaimg.cn/large/007S8ZIlgy1gib43sbhduj31400u0aod.jpg)

分页机制原理

通过映射，可以是连续的线性地址与任意物理内存地址相关联，逻辑上连续的线性地址可以其对应的物理地址可以不连续。

![image-20200901140905492](https://tva1.sinaimg.cn/large/007S8ZIlgy1gid7fzy2atj31400u0an9.jpg)

分页机制作用:

1. 将线性地址转换成物理地址
2. 用大小相等的页替换大小不等的段

### 一级页表

页表:储存线性地址到物理地址的映射。也就是n行一列的一个表格。

页表项：页表中的每一行。其大小是4字节。作用是存储内存物理地址。

页大小:4kb,即内存块大小。

页:即内存块数量。

低12位页内寻址，高20位定位一个物理位。

### 二级页表

将一级页表拆分成1k个页表项。

页目录表(page directory entry):记录每个页表的物理地址。

高10位定位页目录表中的页。

中间10位定位二级 页表。

低12位偏移地址。

### 开启分页

在打开分页机制之前要将页表地址加载到控制寄存器c3.

高20的索引乘4才是该页表项地址偏移量。

低十二位加上该物理地址页。

p196页目录结构

![image-20200903105407897](https://tva1.sinaimg.cn/large/007S8ZIlgy1gid9x7ngqpj30u01404qp.jpg)

虚拟地址3～4gb是操作系统空间，所有用户进程相同。0～3是进程空间。